language: java

jdk:
     - openjdk8

build:
    ci:
        - ./gradlew assemble
        - ./gradlew test
        - ./gradlew jacocoTestReport

    post_ci:
        - ./copy-test-results.sh
        - ./copy-coverage.sh

    on_failure:
        - ./gradlew jacocoTestReport
        - ./copy-test-results.sh
        - ./copy-coverage.sh

integrations:
    notifications:
      - integrationName: telegram-notification
        type: webhook
        payload:
            - MY_MESSAGE=Successfully triggered web hook
        on_success: always