language: java

jdk:
     - openjdk8

build:
    cache: true
    cache_dir_list:
        - /root/.m2

    ci:
        - ./gradlew assemble
        - ./gradlew test
        - ./gradlew jacocoTestReport
        - ls -la $HOME/.gradle
        - ls -la /root/.gradle

    post_ci:
        - ./copy-test-results.sh
        - ./copy-coverage.sh

    on_failure:
        - ./gradlew jacocoTestReport
        - ./copy-test-results.sh
        - ./copy-coverage.sh